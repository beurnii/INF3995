stages:
    - build
    - test

cache:
    paths:
        # - server/build
        - desktop/build

################
# Build Stages #
################

build-server:
    stage: build
    # image: rikorose/gcc-cmake
    image: unibeautify/clang-format
    script:
        - cd server && ./build.sh
        - chmod +x clang.sh && ./clang.sh

build-desktop:
    stage: build
    image: gradle:jdk12
    script:
        - cd desktop && gradle build

###############
# Test Stages #
###############

test-server:
    stage: test
    image: rikorose/gcc-cmake
    script:
        - cd server && echo "TODO"

test-desktop:
    stage: test
    image: gradle:jdk12
    script:
        - cd desktop && gradle test

